# Netcat V2

ä¸€ä¸ªåŠŸèƒ½å¢å¼ºçš„ç½‘ç»œå·¥å…·ï¼Œæ”¯æŒæ­£å‘shellå’Œåå‘shellï¼Œè¯¦è§ä¸‹æ–¹ç”¨æ³•ã€‚

---

## ä¸»è¦ç”¨æ³•

### æ­£å‘shellï¼ˆæœåŠ¡ç«¯æ‰§è¡Œå‘½ä»¤ï¼Œå®¢æˆ·ç«¯æ§åˆ¶ï¼‰

```bash
# æœåŠ¡ç«¯ï¼ˆè¢«æ§ç«¯ï¼Œæ‰§è¡Œå‘½ä»¤ï¼‰
./netcat -l -v -e
# å®¢æˆ·ç«¯ï¼ˆæ§åˆ¶ç«¯ï¼Œè¾“å…¥å‘½ä»¤ï¼‰
./netcat -h 127.0.0.1 -p 4000
```
- å®¢æˆ·ç«¯è¾“å…¥å‘½ä»¤ï¼ŒæœåŠ¡ç«¯æ‰§è¡Œï¼Œç»“æœè¿”å›å®¢æˆ·ç«¯ã€‚

### åå‘shellï¼ˆå®¢æˆ·ç«¯æ‰§è¡Œå‘½ä»¤ï¼ŒæœåŠ¡ç«¯æ§åˆ¶ï¼‰

```bash
# æœåŠ¡ç«¯ï¼ˆæ§åˆ¶ç«¯ï¼Œè¾“å…¥å‘½ä»¤ï¼‰
./netcat -l -v
# å®¢æˆ·ç«¯ï¼ˆè¢«æ§ç«¯ï¼Œæ‰§è¡Œå‘½ä»¤ï¼‰
./netcat -h 127.0.0.1 -p 4000 -e
```
- æœåŠ¡ç«¯è¾“å…¥å‘½ä»¤ï¼Œå®¢æˆ·ç«¯æ‰§è¡Œï¼Œç»“æœè¿”å›æœåŠ¡ç«¯ã€‚

---

## å…¶ä»–åŠŸèƒ½

- æ™®é€šæ•°æ®è½¬å‘ï¼šä¸¤ç«¯éƒ½ä¸åŠ -e
- SSL/TLSã€WebæœåŠ¡ã€UDPç­‰è§ä¸‹æ–‡

---

## æµ‹è¯•

å¯ç”¨`make test`è‡ªåŠ¨éªŒè¯æ­£å‘shellå’Œåå‘shellåŠŸèƒ½ã€‚

---

## ä¸»è¦æ”¹è¿›ï¼ˆV2ï¼‰

### ğŸ›¡ï¸ å¥å£®æ€§å¢å¼º
- **å®Œå–„çš„é”™è¯¯å¤„ç†**: æ‰€æœ‰ç½‘ç»œæ“ä½œéƒ½æœ‰é€‚å½“çš„é”™è¯¯å¤„ç†
- **èµ„æºç®¡ç†**: æ­£ç¡®å…³é—­è¿æ¥å’Œç›‘å¬å™¨ï¼Œé¿å…èµ„æºæ³„æ¼
- **å¹¶å‘å®‰å…¨**: ä½¿ç”¨äº’æ–¥é”ä¿æŠ¤å…±äº«èµ„æº
- **é…ç½®éªŒè¯**: å¯åŠ¨å‰éªŒè¯æ‰€æœ‰é…ç½®å‚æ•°

### âš¡ æ–°åŠŸèƒ½
- **è¶…æ—¶æ§åˆ¶**: å¯é…ç½®è¿æ¥è¶…æ—¶æ—¶é—´
- **é‡è¯•æœºåˆ¶**: è¿æ¥å¤±è´¥æ—¶è‡ªåŠ¨é‡è¯•
- **SSL/TLSæ”¯æŒ**: æ”¯æŒåŠ å¯†è¿æ¥
- **Keep-Alive**: TCPè¿æ¥ä¿æ´»æœºåˆ¶
- **ä¼˜é›…å…³é—­**: æ”¯æŒä¿¡å·å¤„ç†ï¼Œä¼˜é›…é€€å‡º
- **å®Œæ•´UDPæ”¯æŒ**: UDPç›‘å¬æŒç»­è¿è¡Œï¼Œä¸å†åªå¤„ç†ä¸€ä¸ªåŒ…

### ğŸ”§ é…ç½®é€‰é¡¹
- `-timeout`: è¿æ¥è¶…æ—¶æ—¶é—´ (é»˜è®¤30ç§’)
- `-retries`: é‡è¯•æ¬¡æ•° (é»˜è®¤3æ¬¡)
- `-ssl`: å¯ç”¨SSL/TLSåŠ å¯†
- `-keepalive`: å¯ç”¨TCPä¿æ´» (é»˜è®¤å¯ç”¨)
- `-buffer`: æ•°æ®ä¼ è¾“ç¼“å†²åŒºå¤§å° (é»˜è®¤4096å­—èŠ‚)

---

## å¿«é€Ÿä¸Šæ‰‹ï¼ˆV2ï¼‰

### åŸºæœ¬ç”¨æ³•

```bash
# TCPç›‘å¬æ¨¡å¼
./netcat -l -p 8080

# TCPè¿æ¥æ¨¡å¼
./netcat localhost 8080

# UDPç›‘å¬æ¨¡å¼
./netcat -l -n udp -p 8080

# UDPè¿æ¥æ¨¡å¼
./netcat -n udp localhost 8080
```

### é«˜çº§åŠŸèƒ½

```bash
# å¸¦è¶…æ—¶å’Œé‡è¯•çš„è¿æ¥
./netcat -timeout 10s -retries 5 localhost 8080

# SSLåŠ å¯†è¿æ¥
./netcat -ssl localhost 8443

# SSLç›‘å¬æ¨¡å¼
./netcat -l -ssl -p 8443

# SSL WebæœåŠ¡å™¨
./netcat -web -ssl -p 8443 -path ./public

# å‘½ä»¤æ¨¡å¼ (åå‘shell)
./netcat -l -e -p 8080

# Webé™æ€æ–‡ä»¶æœåŠ¡å™¨
./netcat -web -p 8080 -path ./public

# è‡ªå®šä¹‰ç¼“å†²åŒºå¤§å°
./netcat -buffer 8192 localhost 8080
```

---

## å‘½ä»¤è¡Œé€‰é¡¹ï¼ˆV2ï¼‰

```
name: netcat 
version: 
commit: 
build_tags: 
go: go version go1.21.0 darwin/amd64

usage: netcat [options] [host] [port]

options:
  -p int
        host port to connect or listen (default 4000)
  -help
        print this help
  -v    verbose mode (default true)
  -l    listen mode
  -e    shell mode
  -web  web static server
  -path string
        web static path (default "public")
  -n string
        network protocol (default "tcp")
  -h string
        host addr to connect or listen (default "0.0.0.0")
  -timeout duration
        connection timeout (default 30s)
  -retries int
        connection retry attempts (default 3)
  -ssl  use SSL/TLS
  -keepalive
        enable keep-alive (default true)
  -buffer int
        buffer size for data transfer (default 4096)
```

---

## åœºæ™¯æ¼”ç¤ºä¸æˆªå›¾ï¼ˆV2ï¼‰

### 1. æ­£å‘å‘½ä»¤æ‰§è¡Œ
![](images/p1@2x.png)

### 2. åå‘å‘½ä»¤æ‰§è¡Œ
![](images/p2@2x.png)

### 3. æ–‡ä»¶ä¼ è¾“
![](images/p3@2x.png)

### 4. æ ‡å‡†è¾“å…¥è¾“å‡º
![](images/p4@2x.png)

### 5. Webé™æ€æœåŠ¡å™¨
![](images/p5.png)

---

## åŠŸèƒ½ç‰¹æ€§ï¼ˆV2ï¼‰

### 1. ç½‘ç»œåè®®æ”¯æŒ
- **TCP**: å®Œæ•´çš„TCPå®¢æˆ·ç«¯/æœåŠ¡å™¨åŠŸèƒ½
- **UDP**: å®Œæ•´çš„UDPå®¢æˆ·ç«¯/æœåŠ¡å™¨åŠŸèƒ½
- **SSL/TLS**: TCPè¿æ¥æ”¯æŒåŠ å¯†ä¼ è¾“

### 2. ç›‘å¬æ¨¡å¼
- æ”¯æŒå¤šå®¢æˆ·ç«¯è¿æ¥
- ä¼˜é›…å…³é—­å¤„ç†
- ä¿¡å·å¤„ç† (Ctrl+C)
- è¿æ¥æ—¥å¿—è®°å½•

### 3. è¿æ¥æ¨¡å¼
- è‡ªåŠ¨é‡è¯•æœºåˆ¶
- è¶…æ—¶æ§åˆ¶
- è¿æ¥ä¿æ´»
- é”™è¯¯æ¢å¤

### 4. æ•°æ®ä¼ è¾“
- åŒå‘æ•°æ®ä¼ è¾“
- ç¼“å†²åŒºä¼˜åŒ–
- å­—ç¬¦ç¼–ç å¤„ç† (Windows GBKæ”¯æŒ)
- äº¤äº’å¼å’Œéäº¤äº’å¼æ¨¡å¼

### 5. å‘½ä»¤æ¨¡å¼
- åå‘shellåŠŸèƒ½
- è·¨å¹³å°shellæ”¯æŒ
- å‘½ä»¤æ‰§è¡Œè¶…æ—¶æ§åˆ¶

### 6. WebæœåŠ¡å™¨
- é™æ€æ–‡ä»¶æœåŠ¡
- HTTPè¯·æ±‚æ—¥å¿—
- ä¼˜é›…å…³é—­
- SSL/TLSæ”¯æŒï¼ˆHTTPSï¼‰

---

## é”™è¯¯å¤„ç†ï¼ˆV2ï¼‰

### ç½‘ç»œé”™è¯¯
- è¿æ¥å¤±è´¥è‡ªåŠ¨é‡è¯•
- è¶…æ—¶å¤„ç†
- è¿æ¥ä¸­æ–­æ¢å¤

### ç³»ç»Ÿé”™è¯¯
- ä¿¡å·å¤„ç†
- èµ„æºæ¸…ç†
- ä¼˜é›…é€€å‡º

### é…ç½®é”™è¯¯
- å‚æ•°éªŒè¯
- ç«¯å£èŒƒå›´æ£€æŸ¥
- åè®®æ”¯æŒæ£€æŸ¥

---

## æ€§èƒ½ä¼˜åŒ–ï¼ˆV2ï¼‰

### å†…å­˜ç®¡ç†
- å›ºå®šå¤§å°ç¼“å†²åŒº
- åŠæ—¶é‡Šæ”¾èµ„æº
- é¿å…å†…å­˜æ³„æ¼

### ç½‘ç»œä¼˜åŒ–
- TCPä¿æ´»æœºåˆ¶
- è¿æ¥å¤ç”¨
- ç¼“å†²åŒºå¤§å°å¯é…ç½®

### å¹¶å‘å¤„ç†
- å¤šå®¢æˆ·ç«¯æ”¯æŒ
- çº¿ç¨‹å®‰å…¨
- èµ„æºç«äº‰ä¿æŠ¤

---

## å®‰å…¨ç‰¹æ€§ï¼ˆV2ï¼‰

### SSL/TLSæ”¯æŒ
- åŠ å¯†ä¼ è¾“
- è‡ªç­¾åè¯ä¹¦è‡ªåŠ¨ç”Ÿæˆ
- è¯ä¹¦éªŒè¯ (å¯é…ç½®)
- å®‰å…¨è¿æ¥
- æ”¯æŒHTTPS WebæœåŠ¡å™¨

### è®¿é—®æ§åˆ¶
- è¿æ¥æ—¥å¿—
- é”™è¯¯æ—¥å¿—
- è°ƒè¯•ä¿¡æ¯

---

## å¸¸è§ä½¿ç”¨åœºæ™¯

### ç½‘ç»œè°ƒè¯•
```bash
# æµ‹è¯•ç«¯å£è¿é€šæ€§
./netcat -timeout 5s localhost 80

# ç›‘å¬ç«¯å£æŸ¥çœ‹è¿æ¥
./netcat -l -p 8080
```

### æ–‡ä»¶ä¼ è¾“
```bash
# å‘é€æ–‡ä»¶
cat file.txt | ./netcat localhost 8080

# æ¥æ”¶æ–‡ä»¶
./netcat -l -p 8080 > received.txt
```

### åå‘Shell
```bash
# æœåŠ¡å™¨ç«¯
./netcat -l -e -p 8080

# å®¢æˆ·ç«¯è¿æ¥
./netcat localhost 8080
```

### WebæœåŠ¡
```bash
# å¯åŠ¨é™æ€æ–‡ä»¶æœåŠ¡å™¨
./netcat -web -p 8080 -path ./public

# å¯åŠ¨HTTPSé™æ€æ–‡ä»¶æœåŠ¡å™¨
./netcat -web -ssl -p 8443 -path ./public
```

---

## æ„å»º

```bash
# ç¼–è¯‘
go build -o netcat main.go

# äº¤å‰ç¼–è¯‘
GOOS=linux GOARCH=amd64 go build -o netcat-linux main.go
GOOS=windows GOARCH=amd64 go build -o netcat.exe main.go
```

---

## è®¸å¯è¯

MIT License